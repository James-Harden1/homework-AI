# 实验报告



## 一、完成步骤

首先在讯飞星火官网添加新的应用，准备调用Spark 星火模型。添加完模型后，复制好接口认证信息。

![屏幕截图 2025-04-12 172635](C:\Users\20786\Pictures\Screenshots\屏幕截图 2025-04-12 172635.png)



接着去它官网说明文档，学习代码模块和参数选择，里面有不同的调用方法：在Linux，window里以及pycharm SDK的方法。

[星火认知大模型Web API文档 | 讯飞开放平台文档中心](https://www.xfyun.cn/doc/spark/Web.html#_3-1-python-sdk-调用示例)

结尾是调用示例，它有输入后一次回答的和多次回答的，我选择一次的作为我的源代码原型，在那个基础上进行改进。

![image-20250412223528716](C:\Users\20786\AppData\Roaming\Typora\typora-user-images\image-20250412223528716.png)

### 总共有三个文件示例，但都是示范了调用步骤，设置参数参考等。我就先生成了URL后，配置基本接口信息。——》调用API

    handler = ChunkPrintHandler()
    response = spark.generate([messages], callbacks=[handler])

### 这样就算能够成功调用模型供我使用，接下来我只需要输入指令prompt即可完成我的任务。



***\*Tips：\*******\*
\*******\*1. 计费包含接口的输入和输出内容；\****

***\*2. 1 token约等于1.5个中文汉字 或者 0.8个英文单词；\****

***\*3. 仅Spark Pro, Spark Max和Spark 4.0Ultra支持[搜索]、[天气]、[日期]、[诗词]、[字词]、[股票]等内置插件；\****

***\*4. Spark 4.0Ultra、Max现已支持system、Function Call功能；\****

***\*5. 当前仅Spark 4.0Ultra、Max版本支持返回联网检索的信源标题及地址。\***

【我选用的模型是Spark Max】。



[WebSocket协议通用鉴权URL生成说明 | 讯飞开放平台文档中心](https://www.xfyun.cn/doc/spark/general_url_authentication.html)









## 二、代码即输出结果



### 新闻摘要代码

```
from sparkai.llm.llm import ChatSparkLLM, ChunkPrintHandler
from sparkai.core.messages import ChatMessage

# 配置信息（请确认使用正确版本的URL和domain）
SPARKAI_URL = 'wss://spark-api.xf-yun.com/v3.5/chat'
SPARKAI_APP_ID = '63c1f45e'
SPARKAI_API_SECRET = 'YWI1ZWUxNmI5ZjI5Y2Q3OTkyNTc1MGY3'
SPARKAI_API_KEY = 'c690030e3c7ca6f2ac28de657ded6107'
SPARKAI_DOMAIN = 'generalv3.5'


def generate_news_summary(news_text):
    # 创建大模型实例
    spark = ChatSparkLLM(
        spark_api_url=SPARKAI_URL,
        spark_app_id=SPARKAI_APP_ID,
        spark_api_key=SPARKAI_API_KEY,
        spark_api_secret=SPARKAI_API_SECRET,
        spark_llm_domain=SPARKAI_DOMAIN,
        streaming=False,
    )

    # 构建带格式要求的提示词
    prompt = f"""请对今日《人民日报》新闻进行文本摘要，要求：
    1. 用中文输出
    2. 提取梗概，保留关键数据
    3. 提取核心内容，忽略次要细节
    4. 一个段落是一个新闻，每个新闻生成一个摘要
    5. 字数控制在500字以内
    6. 简洁，确切记述文章主要内容

    新闻原文：
    {news_text}

    请按以下格式返回：
    【今日要闻】
    - 新闻1: 摘要要点1
    - 新闻2: 摘要要点2
    ..."""

    messages = [ChatMessage(role="user", content=prompt)]

    # 调用API
    handler = ChunkPrintHandler()
    response = spark.generate([messages], callbacks=[handler])

    # 提取并返回生成的摘要
    return response.generations[0][0].text


if __name__ == '__main__':
    # 新闻文本
    sample_news = """
    4月11日上午，国家主席习近平在北京钓鱼台国宾馆会见来华访问的西班牙首相桑切斯。
　　新华社记者  饶爱民摄

　　新华社北京4月11日电  （记者邵艺博）4月11日上午，国家主席习近平在北京钓鱼台国宾馆会见来华访问的西班牙首相桑切斯。

　　习近平指出，当前，世界百年变局加速演进，多重风险挑战叠加，各国唯有团结协作，才能维护世界和平稳定，促进全球发展繁荣。国际形势越是变乱交织，中西关系良好稳定发展的重要性就越凸显。今年是中国和西班牙建立全面战略伙伴关系20周年，中方愿同西班牙打造更有战略定力、更富发展活力的全面战略伙伴关系，为两国人民增进福祉，为中欧关系增添动力，也为促进世界和平、稳定、发展作出更大贡献。

　　习近平强调，风物长宜放眼量。中西友好是两国人民基于传统友谊、现实需要、长远利益作出的正确抉择。双方要继续巩固相互支持的政治基础，相互信赖、相互尊重，在涉及彼此核心利益和重大关切问题上相互支持，特别是支持彼此维护主权和领土完整。中国14亿多人口的消费升级需求和产业转型潜力，将为世界经济提供强劲动力。中方愿同西班牙用好互利互补的合作优势，发挥好经贸、科技合作机制作用，深挖新能源、高技术制造业、智慧城市等领域合作潜力，打造更多互利合作成果。要赓续相知相亲的友好传统，传承好两国人民深厚的“奥运情”、“熊猫情”，打造“欢乐春节”等新的“金字招牌”，扩大互派留学生规模，让更多青年成为中西友好的生力军。中西都是支持多边主义和开放合作的积极力量，双方要推动构建公正合理的全球治理体系，维护世界和平和安全，促进共同发展繁荣。

　　习近平指出，中国一直视欧盟为多极世界重要一极，是明确支持欧盟团结发展壮大的主要大国。当前形势下，共同打造中欧和平、增长、改革、文明四大伙伴关系具有重要现实意义。中欧应坚持伙伴定位，坚持开放合作。中方愿同欧方共同庆祝建交50年，推动中欧关系继往开来，向战略稳定和相互成就的方向发展，更好造福中欧人民和国际社会。

　　习近平强调，打关税战没有赢家，同世界作对，将孤立自己。70多年来，中国发展始终靠的是自力更生、艰苦奋斗，从不靠谁的恩赐，更不畏惧任何无理打压。无论外部环境如何变化，中国都将坚定信心、保持定力，集中精力办好自己的事。中国和欧盟都是世界主要经济体，都是经济全球化和自由贸易的坚定支持者，双方经济总量超过世界经济总量三分之一，已经形成紧密的经济共生关系。中欧应该履行国际责任，共同维护经济全球化潮流和国际贸易环境，共同抵制单边霸凌行径，不仅维护自身正当权益，也维护国际公平正义，维护国际规则和秩序。

　　桑切斯表示，西班牙和中国建立全面战略伙伴关系20年来，始终相互尊重、友好合作，两国关系不断深化发展。在习近平主席领导下，中国取得卓越发展成就，为世界繁荣稳定作出重大贡献。西班牙重视对华关系，坚定不移奉行一个中国政策，愿同中方保持高层交往，深化贸易、投资、科技创新、绿色能源等领域互利合作，加强教育、文化、旅游领域交流，推动两国关系迈上新台阶。中国是欧盟重要合作伙伴，西班牙始终支持欧中关系稳定发展。欧方坚持开放自由贸易，致力于维护多边主义，反对单边加征关税。贸易战不会有赢家。面对复杂严峻的国际形势，西班牙和欧盟愿与中方加强沟通协作，维护国际贸易秩序，携手应对气候变化、贫困等挑战，维护国际社会共同利益。

　　双方还就乌克兰危机等交换了意见。

　　王毅参加会见。

    另讯：本报北京4月11日电  （记者韩晓明）应越南共产党中央委员会总书记苏林、越南社会主义共和国主席梁强邀请，中共中央总书记、国家主席习近平将于4月14日至15日对越南进行国事访问。应马来西亚最高元首易卜拉欣、柬埔寨国王西哈莫尼邀请，国家主席习近平将于4月15日至18日对马来西亚、柬埔寨进行国事访问。外交部发言人林剑11日在例行记者会上介绍了此次出访的主要安排及中方对发展中越、中马、中柬关系的期待。

　　林剑表示，周边是中国外交的优先方向，中国和东南亚是命运与共的好邻居、好朋友、好伙伴。日前，中央周边工作会议成功召开，明确中方将继续秉持亲诚惠容周边外交理念，同周边国家开展友好合作，增进理解互信，共同发展振兴。此次访问是习近平主席今年首次出访，对推动中国同越南、马来西亚、柬埔寨以及中国东盟关系整体发展具有重大意义，也将为地区乃至世界的和平发展注入新动能。

　　林剑说，中越是社会主义友好邻邦，都在推进符合本国国情的改革和革新事业，加强团结合作符合双方共同利益。2023年底，习近平总书记、国家主席历史性访越，引领中越关系开启中越命运共同体新篇章。去年以来，习近平总书记同苏林总书记保持战略沟通，各部门各地方交往密切，各领域合作成果丰硕，为两国人民带来了切实利益。

　　林剑表示，此访适逢中越建交75周年，对两国关系具有承前启后、继往开来的重大意义。访问期间，习近平总书记将同苏林总书记举行会谈，会见越南国家主席梁强、总理范明政、国会主席陈青敏。中方期待同越方一道，以此访为契机，巩固“同志加兄弟”的中越传统友谊，增进战略互信，深化务实合作，推动中越命运共同体建设走深走实，为构建人类命运共同体作出更大贡献。

　　林剑指出，中马同为亚太重要发展中国家和新兴经济体。近年来，在两国领导人战略引领下，中马关系保持高水平发展，高层交往互动频密，政治互信持续巩固，务实合作成果丰硕，人文交流异彩纷呈，多边协作密切有效，树立了邻国间相互理解、合作共赢的典范。2023年，两国宣布共建中马命运共同体，开启双边关系新的历史篇章。

　　林剑说，此访将是习近平主席时隔12年再次访问马来西亚，对推动中马关系提质升级具有重要的里程碑意义。访问期间，习近平主席将会见易卜拉欣最高元首，同安瓦尔总理举行会谈。中方期待以此访为契机，进一步加强两国政治安全合作，深化发展战略对接，密切文明交流互鉴，加强在国际地区问题上的协调配合，推动双边关系朝着构建高水平战略性中马命运共同体方向迈进，为“全球南方”团结自强、地区和平稳定发展作出新贡献。

　　林剑表示，柬埔寨是我国传统友好邻邦和铁杆朋友。在习近平主席同柬方领导人战略引领下，中柬命运共同体建设迈入高质量、高水平、高标准的新时代。近年来，中柬战略互信更加深入，“钻石六边”合作架构不断充实，“工业发展走廊”和“鱼米走廊”建设持续推进，各领域合作成果丰硕，为两国人民带来了切实利益。

　　林剑说，此访是习近平主席时隔9年再次访问柬埔寨。此访期间，习近平主席将分别会见西哈莫尼国王和莫尼列太后，会见人民党主席、参议院主席洪森亲王，同洪玛奈首相举行会谈。双方将探讨提升中柬关系新定位，就政治互信、互利合作、安全保障、人文交流、战略协作等五大领域深入交换意见。相信习近平主席此访将赋予中柬命运共同体新的时代内涵，推动中柬全面战略合作伙伴关系取得更多积极成果，更好造福两国人民。
   本报北京4月11日电  （记者韩晓明）应越南共产党中央委员会总书记苏林、越南社会主义共和国主席梁强邀请，中共中央总书记、国家主席习近平将于4月14日至15日对越南进行国事访问。应马来西亚最高元首易卜拉欣、柬埔寨国王西哈莫尼邀请，国家主席习近平将于4月15日至18日对马来西亚、柬埔寨进行国事访问。外交部发言人林剑11日在例行记者会上介绍了此次出访的主要安排及中方对发展中越、中马、中柬关系的期待。

　　林剑表示，周边是中国外交的优先方向，中国和东南亚是命运与共的好邻居、好朋友、好伙伴。日前，中央周边工作会议成功召开，明确中方将继续秉持亲诚惠容周边外交理念，同周边国家开展友好合作，增进理解互信，共同发展振兴。此次访问是习近平主席今年首次出访，对推动中国同越南、马来西亚、柬埔寨以及中国东盟关系整体发展具有重大意义，也将为地区乃至世界的和平发展注入新动能。

　　林剑说，中越是社会主义友好邻邦，都在推进符合本国国情的改革和革新事业，加强团结合作符合双方共同利益。2023年底，习近平总书记、国家主席历史性访越，引领中越关系开启中越命运共同体新篇章。去年以来，习近平总书记同苏林总书记保持战略沟通，各部门各地方交往密切，各领域合作成果丰硕，为两国人民带来了切实利益。

　　林剑表示，此访适逢中越建交75周年，对两国关系具有承前启后、继往开来的重大意义。访问期间，习近平总书记将同苏林总书记举行会谈，会见越南国家主席梁强、总理范明政、国会主席陈青敏。中方期待同越方一道，以此访为契机，巩固“同志加兄弟”的中越传统友谊，增进战略互信，深化务实合作，推动中越命运共同体建设走深走实，为构建人类命运共同体作出更大贡献。

　　林剑指出，中马同为亚太重要发展中国家和新兴经济体。近年来，在两国领导人战略引领下，中马关系保持高水平发展，高层交往互动频密，政治互信持续巩固，务实合作成果丰硕，人文交流异彩纷呈，多边协作密切有效，树立了邻国间相互理解、合作共赢的典范。2023年，两国宣布共建中马命运共同体，开启双边关系新的历史篇章。

　　林剑说，此访将是习近平主席时隔12年再次访问马来西亚，对推动中马关系提质升级具有重要的里程碑意义。访问期间，习近平主席将会见易卜拉欣最高元首，同安瓦尔总理举行会谈。中方期待以此访为契机，进一步加强两国政治安全合作，深化发展战略对接，密切文明交流互鉴，加强在国际地区问题上的协调配合，推动双边关系朝着构建高水平战略性中马命运共同体方向迈进，为“全球南方”团结自强、地区和平稳定发展作出新贡献。

　　林剑表示，柬埔寨是我国传统友好邻邦和铁杆朋友。在习近平主席同柬方领导人战略引领下，中柬命运共同体建设迈入高质量、高水平、高标准的新时代。近年来，中柬战略互信更加深入，“钻石六边”合作架构不断充实，“工业发展走廊”和“鱼米走廊”建设持续推进，各领域合作成果丰硕，为两国人民带来了切实利益。

　　林剑说，此访是习近平主席时隔9年再次访问柬埔寨。此访期间，习近平主席将分别会见西哈莫尼国王和莫尼列太后，会见人民党主席、参议院主席洪森亲王，同洪玛奈首相举行会谈。双方将探讨提升中柬关系新定位，就政治互信、互利合作、安全保障、人文交流、战略协作等五大领域深入交换意见。相信习近平主席此访将赋予中柬命运共同体新的时代内涵，推动中柬全面战略合作伙伴关系取得更多积极成果，更好造福两国人民。



   很多人都听说过“空中加油”：飞机在空中补充燃料，边飞边加油，提高续航能力。现在，天空中有“续航焦虑”的还有无人机。近年来，无人机在高空拍摄、地貌测绘、农业植保、物流配送、应急救援等领域大显身手。那么，无人机能否实现“边飞边充电”呢？

　　传统无线充电技术，主要依赖近距离、接触式的电磁谐振感应，其充电效率和适用范围，受到空间、距离、环境、设备等制约，无法实现任意的、远距离供电。比如，日常生活中，大家给手机进行无线充电时，手机就不能随意离开充电盘。

　　如今，远程隔空充电，有望变为现实。我所在的西安电子科技大学电子工程学院科研团队和东南大学崔铁军院士课题组一直在钻研这个问题。近期，我们发现，通过研发一种自适应无线传能技术，可以用类似WiFi的无线传输方式，将无线能量实时、高效地聚焦并传输到动态的终端设备上，实现无电池供电的感知、计算和通信，相关成果发表在《自然·通讯》。未来，包括无人机在内的智能设备有望摆脱传统电池和有线充电设施，无人机“边飞边充电”将变为现实。

　　实现无人机“边飞边充电”，精准定位移动中的无人机，并能高效精准地传递能量是关键。简单来说，基于电磁超表面的辐射式无线能量传输与接收技术宛如“智慧大脑”，能通过目标感知和环境交互，智能化调整电磁波传输参数，包括对电磁波不同幅度、相位、辐射方向的灵活控制，并根据周围环境变化及设备实时需求，提高无线能量传输效率，精准且高效地为设备输送能量，最终实现类似于雷达的波束扫描、跟踪和探测效果。

　　与普通无线充电方式相比，自适应追踪的无线能量传输技术有望支持无人机、智能机器人等终端设备，在移动过程中进行稳定、高效的非接触式无线充电。除了对移动目标的精确定位、精准供能，我们还结合时空二维编码以及人工智能算法，实现对目标设备的室内高精度定位。电磁超表面还能根据实时变化的环境和目标，让能量聚焦更为灵活，进而实现跟踪式隔空输能。即便有障碍物遮挡，也可以实现“拐弯”“绕障”，顺利完成能量传输。

　　理论上来说，目前的实验装置还可以拓展到对多个运动目标的自适应定位，以及对多个目标的高精度聚焦传能，让“边飞边充电”的对象从一扩展到多，通过扩展信息超表面的结构，增大它的功率，能对多个无人机同时供电。

　　无线充电技术的市场应用前景广阔，随着规模化生产和技术升级迭代，其应用成本也将逐步降低。经济实惠的无线充电技术，可为大型智能仓储、可植入医疗设备及低空经济等领域提供更便捷的充电解决方案。让我们一同期待无线充电技术在未来应用场景中大放光彩。

　　（作者为西安电子科技大学电子工程学院教授）

    
    本报天津电  （记者李家鼎）在生物课上，活性氧家族总被描绘成破坏分子结构的“反派角色”。作为这个家族的重要成员，超氧阴离子长期背负着导致细胞氧化损伤的“恶名”。

　　日前，“活性氧超氧阴离子可参与麦角碱药物分子的酶催化合成”登上《自然》。这是中国科学院天津工业生物技术研究所等单位在酶催化机制解析方面取得的重要突破，改变了合成生物领域对超氧阴离子的“负面”认知。麦角生物碱是12种已上市药物（如抗帕金森药）的核心成分，国外药企对麦角生物碱生产相关的核心专利，尤其是麦角菌发酵技术长期垄断。

　　在杭州师范大学合作团队结构生物学数据的支撑下，天津工业生物技术研究所研究团队发现，参与麦角生物碱药物合成的过氧化氢酶EasC同时拥有两座“车间”，一座位于酶中心，另外一座位于酶表面；两个车间之间通过管道相连。酶中心车间负责生产活性氧（超氧阴离子），并将其通过管道输送至酶表面车间，在那里，活性氧催化原料生产麦角碱药物分子。“这种‘双车间—输送管道协同’的酶催化方式，相当于在针尖上建起两座专业车间，分别生产活性氧和药物分子，并建造了活性氧专用运输通道。”天津工业生物技术研究所研究员高书山说，这既利用了活性氧的强大反应能力，又规避了它的破坏性，在保持药物高效生产的同时避免了细胞毒性。

　　该成果得到国内外领域专家的高度评价，认为该工作“为人工设计高效生物催化剂开辟全新路径，在生物制药、绿色化工及新型能源开发等领域具有重大应用潜力”。
    """

    # 生成并打印摘要
    summary = generate_news_summary(sample_news)
    print("\n===== 生成摘要 =====")
    print(summary)
```



### 模型输出

```
E:\anaconda\envs\pytorch\python.exe D:\pythonProject\豆瓣爬虫.py 

===== 生成摘要 =====
【今日要闻】
- 新闻1：国家主席习近平在北京钓鱼台国宾馆会见来华访问的西班牙首相桑切斯。习近平指出当前世界变局加速演进，中西关系良好稳定发展的重要性凸显，中方愿同西班牙打造更富有活力的全面战略伙伴关系，推动中欧关系发展，共同维护多边主义和开放合作，抵制单边霸凌行径。桑切斯表示西班牙重视对华关系，愿深化双方各领域合作。
- 新闻2：外交部发言人林剑介绍习近平主席即将对越南、马来西亚、柬埔寨进行国事访问的相关安排。此次访问意义重大，将推动中国与周边国家关系发展，注入新动能。中越是社会主义友好邻邦，此访适逢中越建交75周年，将巩固传统友谊，深化务实合作；中马关系保持高水平发展，此访有助于推动双边关系提质升级；中柬命运共同体建设迈入新时代，此访有望取得更多积极成果。
- 新闻3：西安电子科技大学科研团队和东南大学崔铁军院士课题组研发自适应无线传能技术，可实现无人机“边飞边充电”。该技术通过电磁超表面辐射式无线能量传输与接收，能精准定位移动中的无人机并高效供能，未来有望拓展到对多个运动目标的自适应定位和高精度聚焦传能。
- 新闻4：中国科学院天津工业生物技术研究所等单位在酶催化机制解析方面取得重要突破。研究发现过氧化氢酶EasC拥有两座“车间”，通过管道相连协同工作，利用活性氧参与麦角碱药物分子的酶催化合成，既利用其反应能力又规避破坏性，为人工设计高效生物催化剂开辟全新路径，在生物制药等领域有重大应用潜力。

Process finished with exit code 0
```

### 截图

![屏幕截图 2025-04-12 203359](C:\Users\20786\Pictures\Screenshots\屏幕截图 2025-04-12 203359.png)

我直接把命令输入进我的代码中，并给它个样式，让它照着生成，这个过程就是与机器对话，不需要额外编辑添加函数，而是直接用指令语法帮助模型识别任务。

problem1：

在这个过程中，我一开始思路有问题，想照着它的实例“

{"role":"system","content":"你现在扮演李白，你豪情万丈，狂放不羁；接下来请用李白的口吻和用户对话。"} #设置对话背景或者模型角色
{"role": "user", "content": "你是谁"} # 用户的历史问题
{"role": "assistant", "content": "....."}  # AI的历史回答结果
\# ....... 省略的历史对话
{"role": "user", "content": "你会做什么"}  # 最新的一条问题，如无需上下文，可只传最新一条问题“，结果我发现沿用官方给的形式在语法上太麻烦了，用以下语句可以直接简化：

```
messages = [ChatMessage(role="user", content=prompt)]

return response.generations[0][0].text
```



problem2：我一开始就用简单的命令要求它输出结果，结果发现不光内容不长，而且摘要也把一个文章划分多个部分，内容识别上就有问题。所以我分段式写出来要求，并用格式予以限制，这样结果才丰富，内容质量高了许多。总而言之，调用API与直接在官网上输入命令有区别，一些参数也难以把控。







### 微博热搜分类代码

```
from sparkai.llm.llm import ChatSparkLLM, ChunkPrintHandler
from sparkai.core.messages import ChatMessage

# 配置信息（请确认使用正确的URL和domain）
SPARKAI_URL = 'wss://spark-api.xf-yun.com/v3.5/chat'
SPARKAI_APP_ID = '63c1f45e'
SPARKAI_API_SECRET = 'YWI1ZWUxNmI5ZjI5Y2Q3OTkyNTc1MGY3'
SPARKAI_API_KEY = 'c690030e3c7ca6f2ac28de657ded6107'
SPARKAI_DOMAIN = 'generalv3.5'


def classify_hot_search(topics_text):

    # 创建星火大模型实例
    spark = ChatSparkLLM(
        spark_api_url=SPARKAI_URL,
        spark_app_id=SPARKAI_APP_ID,
        spark_api_key=SPARKAI_API_KEY,
        spark_api_secret=SPARKAI_API_SECRET,
        spark_llm_domain=SPARKAI_DOMAIN,
        streaming=False,
    )

    # 构建提示词，要求返回纯文本的分类结果，
    # 将热搜词条分别按以下类别列出：政治、经济、社会、娱乐、影视、天气、其他
    prompt = f"""请对以下微博热搜词条进行分类，要求：
1. 分类类别为：政治、经济、社会、娱乐、影视、天气、其他；
2. 仔细思考，分析词的含义
3. 每个类别请将对应的词条单独列出，类别名称后列出所有词条，每个词条之间用换行符或破折号分隔。

热搜词条：
{topics_text}
"""
    # 构造消息列表
    messages = [ChatMessage(role="user", content=prompt)]

    # 创建处理器，可用于分块输出打印信息
    handler = ChunkPrintHandler()

    # 调用API接口，返回生成结果
    response = spark.generate([messages], callbacks=[handler])

    # 提取生成的文本结果
    classification_result = response.generations[0][0].text
    return classification_result


if __name__ == '__main__':

    sample_topics = """
打关税战没有赢家同世界作对将孤立自己
90艘货船正从中国驶向美国
宋祖儿好美
美国是多边贸易体制最大破坏者
无忧渡 无磨皮剧集
年薪28万offer被鸽后男子获赔超4.5万
外交部再发重磅视频
齐思钧和新书同一天生日
林玉芬 古偶真神剧集
升至125%后为何中国不陪了
白敬亭因为帅被偶遇网友认出
美国人买1个鸡蛋要3.8元人民币
王俊凯直播卷发造型
张真源生日直播
山西订婚强奸案将宣判男方父亲发声
山西省长金湘军被查
你要小池塘还是大海
中国企业将迎爆发式增长
滕子京姓滕他不守滕王阁谁守
苹果9天涨价500元
孟晚舟老公是成都七中校友
宋茜拍的陈好男友视角照
生理性厌恶的8个表现
特朗普把made in china给遮住了
胃病向胃癌发展的5个信号
锤娜丽莎cos石矶娘娘太像了演出
郑乃馨吐槽中国厕所脏
JOJO的奇妙冒险 飙马野郎
大风要刮到什么时候
宋小宝造型好像王嘉尔
荷兰议会动议粗暴干涉中国内政
2025电影票房破250亿
LadyGaga科切拉
刘强东称不打口水仗
中国人集体捡漏万元日本别墅
32岁女白领卵巢衰退至50岁
乘客遭遇大暴雨仿佛坐上恐怖公交
第一批大风受害者出现了
张杰一生所爱官摄
美国国鸟吞鹿飞不动吓坏大狗
杭州空气质量已达严重污染
大风到北京城区了
10年前的金价
王俊凯直播
杀害2人嫌犯曾返家告知父亲其杀人
"""

    classification = classify_hot_search(sample_topics)


    print("\n===== 微博热搜词条分类结果 =====")
    print(classification)
```



### 结果及其代码输出

![image-20250412212106038](C:\Users\20786\AppData\Roaming\Typora\typora-user-images\image-20250412212106038.png)

```
E:\anaconda\envs\pytorch\python.exe D:\pythonProject\first_demo.py 

===== 微博热搜词条分类结果 =====
政治：
- 打关税战没有赢家同世界作对将孤立自己
- 美国是多边贸易体制最大破坏者
- 外交部再发重磅视频
- 升至125%后为何中国不陪了
- 荷兰议会动议粗暴干涉中国内政
- 刘强东称不打口水仗

经济：
- 90艘货船正从中国驶向美国
- 年薪28万offer被鸽后男子获赔超4.5万
- 中国企业将迎爆发式增长
- 苹果9天涨价500元
- 中国人集体捡漏万元日本别墅

社会：
- 山西订婚强奸案将宣判男方父亲发声
- 山西省长金湘军被查
- 你要小池塘还是大海
- 乘客遭遇大暴雨仿佛坐上恐怖公交
- 第一批大风受害者出现了
- 杭州空气质量已达严重污染
- 大风到北京城区了

娱乐：
- 宋祖儿好美
- 无忧渡 无磨皮剧集
- 齐思钧和新书同一天生日
- 林玉芬 古偶真神剧集
- 白敬亭因为帅被偶遇网友认出
- 王俊凯直播卷发造型
- 张真源生日直播
- 宋茜拍的陈好男友视角照
- 锤娜丽莎cos石矶娘娘太像了演出
- 郑乃馨吐槽中国厕所脏
- JOJO的奇妙冒险 飙马野郎
- LadyGaga科切拉
- 宋小宝造型好像王嘉尔
- 张杰一生所爱官摄
- 美国国鸟吞鹿飞不动吓坏大狗
- 杀害2人嫌犯曾返家告知父亲其杀人

影视：
- 无忧渡 无磨皮剧集
- 林玉芬 古偶真神剧集
- 王俊凯直播卷发造型
- 张真源生日直播
- 宋茜拍的陈好男友视角照
- 锤娜丽莎cos石矶娘娘太像了演出
- 郑乃馨吐槽中国厕所脏
- JOJO的奇妙冒险 飙马野郎
- 张杰一生所爱官摄

天气：
- 大风要刮到什么时候
- 大风到北京城区了
- 乘客遭遇大暴雨仿佛坐上恐怖公交

Process finished with exit code 0
```

这个代码本质上与上一个是一个原理，就多了一个”# 创建处理器，可用于分块输出打印信息handler = ChunkPrintHandler()“，因为这个代码的要求是分区展示不同微博词条热搜，所以我对第一次生成的不满意，它的结果是把五十个热搜列出来，后面再加上分类的标签，所以我第二次中添加了一个分块输出器，这样输出结构看起来更清爽。

还有一个问题是我一开始想用json格式输出，结果我把微博词条导进去的时候，系统无法识别，它只有”XXX“，才能识别，把五十个词条处理起来十分繁琐。因此我直接用字符串文本形式，生成也是文本，同时，让每个词条之间用换行符或破折号分隔，生成的更规范。



![image-20250412212744413](C:\Users\20786\AppData\Roaming\Typora\typora-user-images\image-20250412212744413.png)